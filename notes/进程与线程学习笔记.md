# 进程与线程学习笔记

## 进程和线程的概念以及区别
> 概念：进程是计算机资源管理的基本单位；线程是计算机真正调度执行的基本单位。  

主要区别： 
1. 每个程序启动就是一个进程，一个程序可以同时启动多个进程；每一个进程中可以有一个或多个线程，线程依赖进程存活。
2. 同一个程序的进程可以共享代码段，但是不同程序的进程往往拥有自己独立的进程空间；一个进程中的线程则共享进程的地址空间和数据资源，每个线程有自己独立的堆栈存放局部变量和方法出入口等信息。
3. 这样设计的好处和目的是进程之间相互隔离互不影响，而线程则是相互协作共同完成一个进程内的不同任务。同时线程比进程更轻量级，拥有更高的并发性。
4. 进程可以通过fork创建子进程，存在父子进程和进程树的概念。而同一个进程中的线程往往是平等的。

## 进程有哪几种状态？如何转换？何时转换？
> 就绪，运行，阻塞。  
就绪 - > 运行。进程被分配到CPU时间片，开始执行。  
运行 - > 阻塞。进程因等待资源等外部因素阻塞等待。  
运行 - > 就绪。进程时间片结束，CPU调度执行其他进程。   
阻塞 - > 就绪。进程等待资源释放，运行环境满足进程运行条件。

## 进程间通信方式

### 概念
> 每个进程各自有不同的用户地址空间,任何一个进程的全局变量在另一个进程中都看不到，所以进程之间要交换数据必须通过内核,在内核中开辟一块缓冲区,进程A把数据从用户空间拷到内核缓冲区,进程B再从内核缓冲区把数据读走,内核提供的这种机制称为进程间通信。

### 进程间通信的目的
1. 进程如何把信息传递给另一个。
2. 确保两个或多个进程在关键活动中不会交叉。
3. 进程间保证正确的执行顺序。

### 管道
1. 匿名管道
2. 高级管道
3. 有名管道

### 消息队列
### 信号
### 信号量
### 共享内存
### 套接字
1. 命名Socket
2. 绑定
3. 监听
4. 连接服务器
5. 发送，接受数据(read, write)
6. 关闭连接(close)

## 线程间通信方式
- 锁
- 软中断信号
- 信号量

## 线程同步方式

## 线程有哪几种状态？如何转换？何时转换？
创建，就绪，运行，阻塞，死亡。  
转换情况类似进程。


## 并行和并发有什么区别
并行： 总线程数 <= CPU总核数  
并发： 总线程数 > CPU总核数

并行是指在多个实体上的多个处理请求。  
并行是指同一实体上的多个请求（为了提升单个CPU的使用率）。

## 什么是用户态和内核态，两者如何切换？


## Java中实现线程的方式和区别
- 继承Thread类，重写run()。
- 实现Runnable接口，重载run()。
- 实现Callable接口，重载run()，可获取任务返回值。
- 区别：
  - 从Java层面来讲，Thread是类，Java单继承的特点意味着子类只能有一个Thread父类。
  - 从底层实现角度讲，JVM通过C++的pthread_create库函数实现Java线程。pthread_create有四个参数，分别是 保存创建线程资源的内存地址，线程属性，运行任务的方法入口地址，任务方法的参数。Thread也是实现了Runnable接口的类，JVM通过设置线程属性为DISTACHED，从主线程分离出单个线程的生命周期，run()方法调用存在于pthread_create库函数第三个参数的地址中，JVM创建线程后线程状态是INITIALIZED，并通过while循环检查线程状态，当Java程序调用start()方法时，会触发内部start0()这个本地方法，start0()对应的C++函数会把线程状态置为RUNNABLE，这时while循环会检测到这个线程的状态改变，从而跳出循环，执行到run()方法。

## Java实现线程的原理

[Java线程学习(一) -- 从Java启动线程到JVM](https://github.com/eziosudo/Operating-System/blob/master/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/Java%E7%BA%BF%E7%A8%8B%E5%AD%A6%E4%B9%A0(%E4%B8%80)%20--%20%E4%BB%8EJava%E5%90%AF%E5%8A%A8%E7%BA%BF%E7%A8%8B%E5%88%B0JVM.md)

## 为什么要用线程池？如何量化创建一个线程的开销？

